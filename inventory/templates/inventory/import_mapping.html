{% extends 'inventory/base.html' %}
{% load static %}
{% block content %}

<div class="container py-5">
  <h2>Map Excel columns to your Item fields</h2>
  <p>File: <strong>{{ filename }}</strong></p>

  <form method="post" action="{% url 'import_items_map' %}">
    {% csrf_token %}

    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Excel Column</th>
          <th>Map to field</th>
        </tr>
      </thead>

      <tbody>
        {% for col in cols %}
        {% with col_index=forloop.counter0 %}
        <tr>
          <td style="min-width:200px;">
            <strong>{{ col }}</strong>
          </td>

          <td>
            <select name="map_{{ col_index }}" class="form-select">
              <option value="">-- skip --</option>
              {% for field_name, label in importable_fields.items %}
                <option value="{{ field_name }}">{{ label }}</option>
              {% endfor %}
            </select>
          </td>
        </tr>
        {% endwith %}
        {% endfor %}
      </tbody>
    </table>

    <div class="mt-3">
      <button class="btn btn-success" type="submit">Import mapped rows</button>
      <a href="{% url 'import_items_upload' %}" class="btn btn-secondary">Back</a>
    </div>
  </form>
</div>

{% endblock %}
